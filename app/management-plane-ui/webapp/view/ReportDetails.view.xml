<mvc:View
    controllerName="com.ndbs.managementplaneui.controller.ReportDetails"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.uxap"
    xmlns:m="sap.m"
    xmlns:f="sap.f"
    xmlns:forms="sap.ui.layout.form"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:core="sap.ui.core"
    xmlns:smartForm="sap.ui.comp.smartform"
    xmlns:smartField="sap.ui.comp.smartfield"
    displayBlock="true"
    height="100%"
>
    <m:Page
        showHeader="false"
        enableScrolling="true"
        showFooter="false"
        showSubHeader="false"
        showNavButton="false"
    >
        <m:FlexBox
            justifyContent="Center"
            alignItems="Center"
        >
            <m:VBox width="95%">
                <ObjectPageLayout
                    id="oplReportDetails"
                    showTitleInHeaderContent="true"
                    upperCaseAnchorBar="false"
                    navigate="onNavToKPIs"
                    beforeNavigate="onBeforeNavigate"
                    class="sapUiSmallMarginTop"
                >
                    <headerTitle>
                        <ObjectPageDynamicHeaderTitle>
                            <expandedHeading>
                                <m:HBox>
                                    <m:Title
                                        text="{reportTitle}"
                                        wrapping="true"
                                    />
                                </m:HBox>
                            </expandedHeading>

                            <actions>
                                <m:Button
                                    text="{i18n>EditBtn}"
                                    type="Emphasized"
                                />
                                <m:Button
                                    text="{i18n>DeleteBtn}"
                                    type="Default"
                                />
                                <m:Button
                                    text="{i18n>CopyBtn}"
                                    type="Default"
                                />
                                <m:OverflowToolbarButton
                                    type="Transparent"
                                    icon="sap-icon://decline"
                                    press=".onCloseColumnLayout"
                                    tooltip="{i18n>closeColumnLayout}"
                                />
                            </actions>
                        </ObjectPageDynamicHeaderTitle>
                    </headerTitle>
                    <headerContent>
                        <m:FlexBox
                            id="fbKPIasHeader"
                            wrap="Wrap"
                            fitContainer="true"
                        >
                            <m:VBox
                                class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                            >
                                <m:Title
                                    text="{i18n>status}"
                                    class="sapUiTinyMarginBottom"
                                />
                                <m:ObjectStatus
                                    text="{status}"
                                    class="sapMObjectStatusLarge"
                                    state="Warning"
                                />
                            </m:VBox>

                            <m:VBox
                                class="sapUiLargeMarginEnd sapUiSmallMarginBottom"
                            >
                                <m:HBox
                                    class="sapUiTinyMarginBottom"
                                    renderType="Bare"
                                >
                                    <m:Label
                                        text="{i18n>lastModified}"
                                        class="sapUiTinyMarginEnd"
                                    />
                                    <m:Text
                                        text="{path: 'lastModified',type: 'sap.ui.model.type.Date',formatOptions: {pattern: 'yyyy/MM/dd'}}"
                                    />
                                </m:HBox>
                                <m:HBox
                                    class="sapUiTinyMarginBottom"
                                    renderType="Bare"
                                >
                                    <m:Label
                                        text="{i18n>creator}"
                                        class="sapUiTinyMarginEnd"
                                    />
                                    <m:Text text="{path: 'creator'}" />
                                </m:HBox>
                            </m:VBox>
                        </m:FlexBox>
                    </headerContent>
                    <sections>
                        <ObjectPageSection
                            titleUppercase="false"
                            id="generateddReports"
                        >
                            <subSections>
                                <ObjectPageSubSection
                                    title="{i18n>description}"
                                    showTitle="false"
                                >
                                    <blocks>
                                        <m:Panel
                                            headerText="{i18n>description}"
                                            class="sapUiNoMarginBegin"
                                        >
                                            <smartForm:SmartForm
                                                id="sfReportDescription"
                                            >
                                                <smartForm:layout>
                                                    <smartForm:ColumnLayout
                                                        emptyCellsLarge="4"
                                                        columnsL="2"
                                                        columnsM="2"
                                                        columnsXL="2"
                                                    />
                                                </smartForm:layout>
                                                <smartForm:Group>
                                                    <smartForm:GroupElement>
                                                        <smartField:SmartField
                                                            value="{description}"
                                                        />
                                                    </smartForm:GroupElement>
                                                </smartForm:Group>
                                            </smartForm:SmartForm>
                                        </m:Panel>
                                    </blocks>
                                </ObjectPageSubSection>
                            </subSections>
                        </ObjectPageSection>
                        <ObjectPageSection
                            titleUppercase="false"
                            id="reportDocuments"
                        >
                            <subSections>
                                <ObjectPageSubSection
                                    title="{i18n>DataSources}"
                                    showTitle="false"
                                >
                                    <blocks>
                                        <smartTable:SmartTable
                                            id="stDataSources"
                                            smartFilterId="sfbDocuments"
                                            header="{i18n>stDataSources}"
                                            tableType="ResponsiveTable"
                                            entitySet="Documents"
                                            enableAutoBinding="false"
                                            class="sapUiResponsiveContentPadding"
                                            showPasteButton="true"
                                            showFullScreenButton="true"
                                            beforeRebindTable="onBeforeRebindTable"
                                            requestAtLeastFields="reportID"
                                            enableCopy="false"
                                            enablePaste="false"
                                            enableExport="false"
                                        >
                                            <m:Table
                                                id="iddDocumentTable"
                                                growing="true"
                                                growingThreshold="20"
                                                growingScrollToLoad="true"
                                                sticky="ColumnHeaders"
                                                mode="MultiSelect"
                                            >
                                                <m:columns>
                                                    <m:Column>
                                                        <m:customData>
                                                            <core:CustomData
                                                                key="p13nData"
                                                                value='\{"columnKey": "AIMatch", "leadingProperty": "AIMatch", "columnIndex": 1}'
                                                            />
                                                        </m:customData>
                                                        <m:Text
                                                            text="{i18n>AIMatch}"
                                                        />
                                                    </m:Column>
                                                    <m:Column>
                                                        <m:customData>
                                                            <core:CustomData
                                                                key="p13nData"
                                                                value='\{"columnKey": "page", "leadingProperty": "page,textLine", "columnIndex": 99}'
                                                            />
                                                        </m:customData>
                                                        <m:Text
                                                            text="{i18n>textLineAndPage}"
                                                        />
                                                    </m:Column>
                                                </m:columns>
                                                <m:items>
                                                    <m:ColumnListItem
                                                        type="Navigation"
                                                        press="onNavToDetails"
                                                        highlight="{path:'AIMatch', formatter:'.formatter.formatRowHighlight'}"
                                                    >
                                                        <m:ObjectStatus
                                                            text="{AIMatch}%"
                                                            state="{path:'AIMatch', formatter:'.formatter.formatRowHighlight'}"
                                                            class="sapMObjectStatusMedium"
                                                        />
                                                        <m:ObjectStatus
                                                            text="{parts:['page','textLine'], formatter:'.formatter.formatPageTextLine'}"
                                                            state="Information"
                                                            class="sapMObjectStatusMedium"
                                                        />
                                                    </m:ColumnListItem>
                                                </m:items>
                                            </m:Table>
                                            <smartTable:customToolbar>
                                                <m:OverflowToolbar
                                                    design="Transparent"
                                                >
                                                    <m:ToolbarSpacer />
                                                    <m:Input
                                                        width="200px"
                                                        placeholder="Search"
                                                        valueHelpIconSrc="sap-icon://search"
                                                        showValueHelp="true"
                                                    />
                                                    <m:Button
                                                        id="createeButton"
                                                        text="{i18n>AddBtn}"
                                                        type="Default"
                                                        press="onPressAdd"
                                                    />
                                                    <m:Button
                                                        id="editButton"
                                                        text="{i18n>EditBtn}"
                                                        type="Transparent"
                                                        press="onPressEdit"                         
                                                    />
                                                    <m:Button
                                                        id="deleteeButton"
                                                        text="{i18n>DeleteBtn}"
                                                        type="Transparent"
                                                        press="onPressDelete"                         
                                                    />
                                                </m:OverflowToolbar>
                                            </smartTable:customToolbar>
                                        </smartTable:SmartTable>
                                    </blocks>
                                </ObjectPageSubSection>
                            </subSections>
                            <ObjectPageSubSection
                                    title="{i18n>Documents}"
                                    showTitle="false"
                                >
                                    <blocks>
                                        <smartTable:SmartTable
                                            id="stTreeDocuments"
                                            smartFilterId="sfbDocuments"
                                            header="{i18n>UploadedDocuments}"
                                            tableType="TreeTable"
                                            entitySet="Documents"
                                            showRowCount="true"
                                            enableAutoBinding="true" 
                                            class="sapUiResponsiveContentPadding"
                                            showPasteButton="true"
                                            showFullScreenButton="true"
                                            beforeRebindTable="onBeforeRebindTreeTable"
                                            requestAtLeastFields="reportID"
                                            enablePaste="false"
                                            enableCopy="false"
                                            enableAutoColumnWidth="true"
                                        >
                                        <smartTable:customToolbar>
                                                <m:OverflowToolbar
                                                    design="Transparent"
                                                >
                                                    <m:ToolbarSpacer />
                                                    <m:Input
                                                        width="200px"
                                                        placeholder="Search"
                                                        valueHelpIconSrc="sap-icon://search"
                                                        showValueHelp="true"
                                                    />
                                                    <m:Button
                                                        id="addDocumentButton"
                                                        text="{i18n>AddBtn}"
                                                        type="Default"
                                                        press="onPressAdd"
                                                    />
                                                    <m:Button
                                                        id="editDocumentButton"
                                                        text="{i18n>EditBtn}"
                                                        type="Transparent"
                                                        press="onPressEditDocument"                         
                                                    />
                                                    <m:Button
                                                        id="deleteDocumentButton"
                                                        text="{i18n>DeleteBtn}"
                                                        type="Transparent"
                                                        press="onPressDelete"                         
                                                    />
                                                </m:OverflowToolbar>
                                            </smartTable:customToolbar>
                                        </smartTable:SmartTable>
                                    </blocks>
                                </ObjectPageSubSection>
                        </ObjectPageSection>
                    </sections>
                </ObjectPageLayout>
            </m:VBox>
        </m:FlexBox>
    </m:Page>
</mvc:View>
